<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Skins Jackpot</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container header-content">
            <div class="logo">RustJackpot</div>
            <nav class="main-nav">
                <ul>
                    <li><a href="#" class="active">Home</a></li>
                    <li><a href="#" id="faq-link">FAQ</a></li>
                    <li><a href="#" id="fair-link">Provably Fair</a></li>
                    <li><a href="#" id="about-link">About</a></li>
                    <li><a href="#" id="roadmap-link">Roadmap</a></li>
                </ul>
            </nav>
            <div class="user-controls">
                <a href="#" id="loginButton" class="login-button">
                    <i class="fab fa-steam"></i> Login with Steam
                </a>
                <div id="userProfile" class="user-profile" style="display: none;">
                    <img id="userAvatar" src="/img/default-avatar.png" alt="User Avatar" class="user-avatar">
                    <span id="userName" class="user-name">User</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- Home Page -->
            <div id="home-page" class="page">
                <section class="jackpot-section">
                    <div id="jackpotHeader" class="jackpot-header">
                        <div class="jackpot-title">
                            <i class="fas fa-trophy"></i> Current Jackpot
                        </div>
                        <div class="jackpot-stats">
                            <div class="jackpot-stat">
                                <div class="stat-label">Pot Value</div>
                                <div id="potValue" class="stat-value pot-value">0.00</div>
                            </div>
                            <div class="jackpot-stat">
                                <div class="stat-label">Participants</div>
                                <div id="participantCount" class="stat-value">0/20</div>
                            </div>
                            <div class="timer-container">
                                <svg class="timer-background" viewBox="0 0 100 100">
                                    <circle class="timer-circle" cx="50" cy="50" r="42" />
                                </svg>
                                <svg class="timer-background" viewBox="0 0 100 100">
                                    <circle id="timerForeground" class="timer-foreground" cx="50" cy="50" r="42" />
                                </svg>
                                <div id="timerValue" class="timer-value">99</div>
                            </div>
                        </div>
                        <button id="showDepositModal" class="deposit-button">
                            <i class="fas fa-plus-circle"></i> Deposit Skins
                        </button>
                    </div>
                    <div class="jackpot-content">
                        <div class="jackpot-tab">Current Pot</div>
                        <div id="inlineRoulette" class="inline-roulette">
                            <div id="rouletteTrack" class="roulette-track"></div>
                        </div>
                        <div id="winnerInfo" class="winner-info" style="display: none;">
                            <div class="winner-title">Winner!</div>
                            <div class="winner-avatar-container">
                                <img id="winnerAvatar" src="/img/default-avatar.png" alt="Winner Avatar" class="winner-avatar">
                            </div>
                            <div id="winnerName" class="winner-name">Username</div>
                            <div class="winner-stats">
                                <div class="winner-stat">
                                    <div class="winner-stat-label">Deposit</div>
                                    <div id="winnerDeposit" class="winner-stat-value">$0.00</div>
                                </div>
                                <div class="winner-stat">
                                    <div class="winner-stat-label">Win Chance</div>
                                    <div id="winnerChance" class="winner-stat-value">0%</div>
                                </div>
                            </div>
                            <button id="returnToJackpot" class="return-button" style="display: none;">Return to Jackpot</button>
                            <div id="confettiContainer" class="confetti-container"></div>
                        </div>
                        <div id="itemsContainer" class="participants-container">
                            <div id="emptyPotMessage" class="empty-pot-message">
                                <i class="fas fa-info-circle"></i> The pot is currently empty. Be the first to deposit!
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- FAQ Page -->
            <div id="faq-page" class="page" style="display: none;">
                <div class="faq-container">
                    <h1 class="faq-title">Frequently Asked Questions</h1>
                    <div class="faq-item">
                        <h2 class="faq-question">How does the jackpot work?</h2>
                        <p class="faq-answer">
                            Players deposit skins into the pot. Each skin's value gives you tickets proportional to its value.
                            When the timer ends, a random ticket is selected as the winner, and that player receives all skins in the pot (minus a small fee).
                        </p>
                    </div>
                    <div class="faq-item">
                        <h2 class="faq-question">How is the winner determined?</h2>
                        <p class="faq-answer">
                            The winner is determined using a provably fair system. Each round has a secret that is hashed and displayed before the round starts.
                            When the round ends, the secret is revealed and used to generate the winning ticket number.
                        </p>
                    </div>
                    <div class="faq-item">
                        <h2 class="faq-question">What is the house fee?</h2>
                        <p class="faq-answer">
                            We take a 5-10% fee from each pot to cover operational costs and continue improving the site.
                        </p>
                    </div>
                    <div class="faq-item">
                        <h2 class="faq-question">How do I deposit skins?</h2>
                        <p class="faq-answer">
                            Log in with your Steam account, set your trade URL in your profile, and click the "Deposit Skins" button.
                            Select the skins you want to deposit and confirm. You'll receive a trade offer that you need to accept.
                        </p>
                    </div>
                    <div class="faq-item">
                        <h2 class="faq-question">How do I receive my winnings?</h2>
                        <p class="faq-answer">
                            If you win, you'll automatically receive a trade offer with all the skins from the pot (minus the fee).
                            Make sure your trade URL is set correctly and your inventory is public.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Provably Fair Page -->
            <div id="fair-page" class="page" style="display: none;">
                <div class="fair-container">
                    <h1 class="fair-title">Provably Fair System</h1>
                    <p class="fair-description">
                        Our jackpot system uses a provably fair algorithm to ensure that the outcome of each round cannot be manipulated.
                        Here's how it works:
                    </p>
                    <div class="fair-section">
                        <h2 class="fair-section-title">How It Works</h2>
                        <p>
                            1. Before each round, we generate a random secret.<br>
                            2. We hash this secret using SHA-256 and display the hash publicly.<br>
                            3. When the round ends, we reveal the original secret.<br>
                            4. The winning ticket is determined by applying HMAC-SHA256 to the round ID using the secret as the key.<br>
                            5. You can verify that the hash matches the secret and that the winning ticket was fairly selected.
                        </p>
                    </div>
                    <div class="fair-section">
                        <h2 class="fair-section-title">Verify Past Rounds</h2>
                        <button id="verify-btn" class="submit-button">Verify Current Round</button>
                        <table class="rounds-table">
                            <thead>
                                <tr>
                                    <th>Round ID</th>
                                    <th>Date</th>
                                    <th>Pot Value</th>
                                    <th>Players</th>
                                    <th>Winner</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="rounds-table-body">
                                <tr>
                                    <td colspan="6">Loading past rounds...</td>
                                </tr>
                            </tbody>
                        </table>
                        <div id="rounds-pagination" class="pagination"></div>
                    </div>
                </div>
            </div>

            <!-- About Page -->
            <div id="about-page" class="page" style="display: none;">
                <div class="about-container">
                    <h1 class="about-title">About RustJackpot</h1>
                    <div class="about-section">
                        <h2 class="about-section-title">Our Mission</h2>
                        <p class="about-text">
                            RustJackpot aims to provide a fair, transparent, and exciting platform for Rust skin enthusiasts to participate in jackpot games.
                            We believe in complete transparency and fairness in all our operations.
                        </p>
                    </div>
                    <div class="about-section">
                        <h2 class="about-section-title">Our Team</h2>
                        <p class="about-text">
                            We are a team of passionate gamers and developers who love Rust and its vibrant skin economy.
                            Our goal is to create the best jackpot experience possible for the Rust community.
                        </p>
                    </div>
                    <div class="about-section">
                        <h2 class="about-section-title">Contact Us</h2>
                        <p class="about-text">
                            If you have any questions, suggestions, or concerns, please don't hesitate to contact us at:<br>
                            Email: support@rustjackpot.com<br>
                            Discord: discord.gg/rustjackpot
                        </p>
                    </div>
                </div>
            </div>

            <!-- Roadmap Page -->
            <div id="roadmap-page" class="page" style="display: none;">
                <div class="roadmap-container">
                    <h1 class="roadmap-title">Development Roadmap</h1>
                    <div class="roadmap-timeline">
                        <div class="roadmap-item">
                            <div class="roadmap-date">Q1 2023</div>
                            <div class="roadmap-event">Beta Launch</div>
                            <div class="roadmap-description">
                                Initial launch of RustJackpot with core jackpot functionality.
                            </div>
                        </div>
                        <div class="roadmap-item">
                            <div class="roadmap-date">Q2 2023</div>
                            <div class="roadmap-event">Mobile Optimization</div>
                            <div class="roadmap-description">
                                Fully responsive design for mobile devices and tablets.
                            </div>
                        </div>
                        <div class="roadmap-item">
                            <div class="roadmap-date">Q3 2023</div>
                            <div class="roadmap-event">Coinflip Mode</div>
                            <div class="roadmap-description">
                                Introduction of 1v1 coinflip games for head-to-head betting.
                            </div>
                        </div>
                        <div class="roadmap-item">
                            <div class="roadmap-date">Q4 2023</div>
                            <div class="roadmap-event">Loyalty Program</div>
                            <div class="roadmap-description">
                                Rewards for regular players and special events for the community.
                            </div>
                        </div>
                        <div class="roadmap-item">
                            <div class="roadmap-date">2024</div>
                            <div class="roadmap-event">Expansion to Other Games</div>
                            <div class="roadmap-description">
                                Support for skins from other popular games.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Deposit Modal -->
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Deposit Skins</h2>
                <button id="closeDepositModal" class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="inventory-container">
                    <div class="inventory-section">
                        <div class="inventory-title">
                            Your Inventory
                        </div>
                        <div id="inventory-loading" class="inventory-loading">
                            <div class="spinner"></div>
                        </div>
                        <div id="inventory-items" class="inventory-items"></div>
                    </div>
                    <div class="inventory-section">
                        <div class="inventory-title">
                            Selected Items <span id="totalValue" class="inventory-value">0.00</span>
                        </div>
                        <div id="selectedItems" class="selected-items"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeDepositModal2" class="cancel-button">Cancel</button>
                <button id="depositButton" class="submit-button" disabled>Deposit Items</button>
            </div>
        </div>
    </div>

    <!-- Trade URL Modal -->
    <div id="tradeUrlModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Set Trade URL</h2>
                <button id="closeTradeUrlModal" class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="tradeUrlInput" class="form-label">Your Steam Trade URL</label>
                    <input type="text" id="tradeUrlInput" class="form-input" placeholder="https://steamcommunity.com/tradeoffer/new/?partner=...&token=...">
                    <p class="form-help">
                        You can find your trade URL in your <a href="https://steamcommunity.com/my/tradeoffers/privacy" target="_blank">Steam Trade Offers Privacy Settings</a>.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeTradeUrlModal2" class="cancel-button">Cancel</button>
                <button id="saveTradeUrl" class="submit-button">Save Trade URL</button>
            </div>
        </div>
    </div>

    <!-- Age Verification Modal -->
    <div id="ageVerificationModal" class="modal">
        <div class="modal-content">
            <div class="age-verification-content">
                <h2 class="age-verification-title">Age Verification</h2>
                <p class="age-verification-text">
                    This website contains gambling content and is only available to users who are at least 18 years old (or the legal gambling age in your jurisdiction).
                </p>
                <div class="checkbox-group">
                    <input type="checkbox" id="agreeCheckbox" class="checkbox-input">
                    <label for="agreeCheckbox" class="checkbox-label">I confirm that I am at least 18 years old</label>
                </div>
                <button id="agreeButton" class="agree-button" disabled>Enter Site</button>
            </div>
        </div>
    </div>

    <!-- Test Buttons (Development Only) -->
    <div class="test-buttons">
        <button id="testSpinButton" class="test-button">Test Spin</button>
        <button id="testDepositButton" class="test-button">Test Deposit</button>
    </div>

    <!-- Audio -->
    <audio id="spinSound" src="/audio/spin.mp3" preload="auto"></audio>

    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js"></script>
</body>
</html>
